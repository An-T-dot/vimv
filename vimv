#!/bin/bash

# Lists the current directory's files in Vim, so you can edit it and save to rename them
# USAGE: vimv
# https://github.com/thameera/vimv

IFS=$'\r\n' GLOBIGNORE='*' command eval  'arr1=($(ls *))'

touch /tmp/vimv.$$
for ((i=0;i<${#arr1[@]};++i)); do
    echo "${arr1[i]}" >> /tmp/vimv.$$
done

vi /tmp/vimv.$$

IFS=$'\r\n' GLOBIGNORE='*' command eval  'arr2=($(cat /tmp/vimv.$$))'

for ((i=0;i<${#arr1[@]};++i)); do
    if [ "${arr1[i]}" != "${arr2[i]}" ]; then
        printf "%s    --->    %s\n" "${arr1[i]}" "${arr2[i]}"
        mv "${arr1[i]}" "${arr2[i]}"
    fi
done

rm /tmp/vimv.$$
